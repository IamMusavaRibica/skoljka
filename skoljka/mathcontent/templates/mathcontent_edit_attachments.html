{% extends "base.html" %}

{% load mathcontent_tags %}
{% load i18n %}

{% block title %}{% trans "Editing of attachments" %}{% endblock %}

{% block content %}

{% if task %}
  <h4>{{ task.get_link }}</h4>
{% endif %}
<div class="outset outset-margin">
  {% mathcontent_render content %}
</div>

<div class="outset outset-margin">
  <h4>{% trans "Existing attachments" %}</h4>
  <table class="table-striped table-condensed" style="width: 40%">

  {% for x in content.attachments.all %}
    <tr>
      <td><a href="{{ x.get_url }}">{{ x.get_filename }}</a></td>
      <td>{{ x.cache_file_size|filesizeformat }}</td>
      <td><a class="mc-attachment-delete" data-id="{{ x.id }}" data-name="{{ x.get_filename }}" href="#" title="Izbiši">Izbriši</a></td>
    </tr>
  {% empty %}
    <tr><td><i>{% trans "No attachments." %}</i></td></tr>
  {% endfor %}
  </table>
</div>

<div class="outset">
  <h4>{% trans "Upload an attachment" %}</h4>
  <form enctype="multipart/form-data" method="post" action="/mathcontent/{{ content.id }}/attachments/">
    {% csrf_token %}
    {{ form.as_p }}
    <input type="submit" value="{% trans "Submit" %}" class="btn-primary">
  </form>
</div>

{% endblock %}
