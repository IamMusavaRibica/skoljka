{% extends "competition_base.html" %}

{% load competition_tags %}
{% load mathcontent_tags %}

{% block content %}

<h3 class="comp-header">Obavijesti</h3>

<div class="instructions">
  <p>Ovdje su prikazane obavijesti u vezi zadataka ili samog natjecanja.</p>
  {% if team %}
    <p>Također, odavde možete poslati svoja pitanja ili poruke administatorima.
      Vaše poruke neće biti vidljive drugim timovima.</p>
  {% endif %}
</div>

{% for post in posts %}
  <div class="outset outset-margin post mc-hover-area
          {% if not post.t_team %}comp-global-notification{% endif %}"
      id="post{{ post.pk }}">
    <div class="post-info">
      {% if post.t_team and post.author_id in team_member_ids %}
        {{ post.author|userlink }},
      {% endif %}
      {{ post.date_created }}
    </div>

    {% mathcontent_render post.content %}

    {% if post.date_created != post.last_edit_time %}
      <div class="post-last-edit">
        Zadnja promjena: {{ post.last_edit_time }}
      </div>
    {% endif %}
  </div>
{% empty %}
  <i>Nema obavijesti.</i><br><br>
{% endfor %}

{% if team %}
  <div id="post">
    <form action="/post/add/" method="post">
      {% csrf_token %}
      <input type="hidden" name="object_id" value="{{ target_container.pk }}">
      <input type="hidden" name="content_type_id"
             value="{{ target_container.posts.get_content_type_id }}">
      <input type="hidden" name="post_reply_id" value="">
      <input type="hidden" name="post_redirect" value="{{ request.path }}">
      {{ target_container.posts.get_post_form.as_p }}
      <input type="submit" class="btn btn-primary" value="Pošalji poruku">
      <span id="reply-to-info" style="display:none;">
        Odgovor na <a href="#">poruku</a>.
        <a href="#post" class="icon-remove"></a>
      </span>
    </form>
  </div>
{% endif %}

{% endblock content %}
